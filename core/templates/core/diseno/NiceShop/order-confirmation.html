{% extends 'core/diseno/NiceShop/base.html' %}
{% load static %}
{% load carrito_filters %}
{% load telefonos %}
{% block content %}
<main class="main">

  <!-- Page Title -->
  <div class="page-title light-background">
    <div class="container d-lg-flex justify-content-between align-items-center">
      <h1 class="mb-2 mb-lg-0">Orden confirmada</h1>
      <nav class="breadcrumbs">
        <ol>
          <li><a href="{% url 'home' %}">Inicio</a></li>
          <li class="current">Orden confirmada</li>
        </ol>
      </nav>
    </div>
  </div><!-- End Page Title -->

  <!-- Order Confirmation Section -->
  <section id="order-confirmation" class="order-confirmation section">
    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="order-confirmation-3">
        <div class="row g-0">
          <!-- Left sidebar with order summary -->
          <div class="col-lg-4 sidebar" data-aos="fade-right">
            <div class="sidebar-content">
              <!-- Success animation -->
              <div class="success-animation">
                <i class="bi bi-check-lg"></i>
              </div>

              <!-- Order number and date -->
              <div class="order-id">
                <h4>Oreden #ORD-{{ carrito_venta.venta.paypal_order_id }}</h4>
                <div class="order-date">{{ carrito_venta.venta.fecha_creacion }}</div>
              </div>

              <!-- Order progress stepper -->
              <div class="order-progress">
                <div class="stepper-container">
                  <div class="stepper-item completed">
                    <div class="stepper-icon">1</div>
                    <div class="stepper-text">Confirmada</div>
                  </div>
                  <div class="stepper-item current">
                    <div class="stepper-icon">2</div>
                    <div class="stepper-text">Procesada</div>
                  </div>
                  <div class="stepper-item">
                    <div class="stepper-icon">3</div>
                    <div class="stepper-text">Entregada</div>
                  </div>
                  <div class="stepper-item">
                    <div class="stepper-icon">4</div>
                    <div class="stepper-text">Devolución</div>
                  </div>
                </div>
              </div>

              <!-- Price summary -->
              <div class="price-summary">
                <h5>Resumen de orden</h5>
                <ul class="summary-list">
                  <li>
                    <span>Subtotal</span>
                    <span>${{ carrito_venta.subtotal }}</span>
                  </li>
                  <!--                    
                    <li>
                      <span>Envío</span>
                      <span>$0.00</span>
                    </li>
-->
                  <li>
                    <span>I.V.A.</span>
                    <span>${{ carrito_venta.iva_total }}</span>
                  </li>
                  <li class="total">
                    <span>Total</span>
                    <span>${{ carrito_venta.total_general }}</span>
                  </li>
                </ul>
              </div>

              <!-- Delivery info -->
              <div class="delivery-info">
                <h5>Información de entrega</h5>
                <p class="delivery-estimate">
                  <i class="bi bi-calendar-check"></i>
                  <span>Fecha estimada de entrega: </span>
                </p>
                <!--                  
                  <p class="shipping-method">
                    <i class="bi bi-truck"></i>
                    <span>Free Shipping</span>
                  </p>
-->
              </div>

              <!-- Customer service -->
              <div class="customer-service">
                <h5>¿Necesitas ayuda?</h5>
                <a href="#" class="help-link">
                  <i class="bi bi-chat-dots"></i>
                  <span>Soporte</span>
                </a>
                <a href="#" class="help-link">
                  <i class="bi bi-question-circle"></i>
                  <span>FAQs</span>
                </a>
              </div>
            </div>
          </div>

          <!-- Main content area -->
          <div class="col-lg-8 main-content" data-aos="fade-in">
            <!-- Thank you message -->
            <div class="thank-you-message">
              <h1>Gracias por comprar!</h1>
              <p>Su orden a sido enviada los talleres para que pueda pasar por sus llantas.<br>
                Si hubiera algun inconveniente estaríamos comunicandonos con usted.</p>
            </div>

            <!-- Shipping details -->
            <div class="details-card" data-aos="fade-up">
              <div class="card-header" data-toggle="collapse">
                <h3>
                  <i class="bi bi-geo-alt"></i>
                  Detalle de la compra
                </h3>
                <i class="bi bi-chevron-down toggle-icon"></i>
              </div>
              <div class="card-body">
                <div class="row g-4">
                  <div class="col-md-6">
                    <div class="detail-group">
                      <label>Cliente</label>
                      <address>
                        {{ carrito_venta.venta.nombre_cliente }}<br>
                        {{ carrito_venta.venta.direccion }}, {{ carrito_venta.venta.colonia }}<br>
                        {{ carrito_venta.venta.ciudad }}, {{ carrito_venta.venta.estado }} {{ carrito_venta.venta.cp}}<br>
                        {{ carrito_venta.venta.pais }}
                      </address>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="detail-group">
                      <label>Contacto</label>
                      <div class="contact-info">
                        <p><i class="bi bi-envelope"></i> {{ carrito_venta.venta.email_cliente }}</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Payment details -->
            <!--
              <div class="details-card" data-aos="fade-up">
                <div class="card-header" data-toggle="collapse">
                  <h3>
                    <i class="bi bi-credit-card"></i>
                    Payment Details
                  </h3>
                  <i class="bi bi-chevron-down toggle-icon"></i>
                </div>
                <div class="card-body">
                  <div class="payment-method">
                    <div class="payment-icon">
                      <i class="bi bi-credit-card-2-front"></i>
                    </div>
                    <div class="payment-details">
                      <div class="card-type">American Express</div>
                      <div class="card-number">•••• •••• •••• 3782</div>
                    </div>
                  </div>
                  <div class="billing-address mt-4">
                    <h5>Billing Address</h5>
                    <p>Same as shipping address</p>
                  </div>
                </div>
              </div>
            -->
            <!-- Order items -->
            <div class="details-card" data-aos="fade-up" "="">
            <div class=" card-header" data-toggle="collapse">
              <h3>
                <i class="bi bi-bag-check"></i>
                Llantas ordenadas
              </h3>
              <i class="bi bi-chevron-down toggle-icon"></i>
            </div>

            <div class="card-body">
              {% for pk, renglon in carrito_venta.items %}
              {% if pk|isdigit %}
              <div class="item row g-4">
                <div class="col-md-6">
                  <div class="item-image">
                    <img src="{% static 'core/img/rin/r13.png' %}" alt="Product" loading="lazy">
                  </div>
                  <div class="item-details">
                    <h4>{{ renglon.razon_social }}</h4>
                    <div class="item-meta">
                      <span>{{ renglon.descripcion }}</span>
                    </div>
                    <div class="item-price">
                      <span class="quantity">{{ renglon.cantidad }} x ${{ renglon.precio }} = </span>
                      <span class="price">${{ renglon.total }}</span>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="item-details">
                    <h4>Recoger en</h4>
                    <div class="item-meta">
                      <span>{{ renglon.direccion }}</span>
                      <span class="quantity">{{ renglon.numero_exterior|default_if_none:"" }} 
                        {{ renglon.numero_interior|default_if_none:"" }}</span>
                      <span class="price"> {{ renglon.colonia|default_if_none:"" }}, 
                        {{ renglon.municipio|default_if_none:"" }}, {{ renglon.codigo_postal|default_if_none:"" }},</span>
                      <span class="price"> {{ renglon.estado|default_if_none:"" }} </span>
                      <hr>
                      <p><i class="bi bi-envelope"></i> {{ renglon.coreo }}</p>
                      <p><i class="bi bi-telephone"></i> {{ renglon.telefono | formato_telefono }}</p>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
              {% endfor %}
            </div>
          </div>

          <!-- Action buttons -->
          <div class="action-area" data-aos="fade-up">
            <div class="row g-3">
              <div class="col-md-6">
                <a href="{% url 'home' %}" class="btn btn-back">
                  <i class="bi bi-arrow-left"></i>
                  Seguir comprando
                </a>
              </div>
              <div class="col-md-6">
                <a href="#" class="btn btn-account">
                  <span>Ver en cuenta</span>
                  <i class="bi bi-arrow-right"></i>
                </a>
              </div>
            </div>
          </div>

          <!-- Recommended products -->
          <!--
            <div class="recommended" data-aos="fade-up">
              <h3>Esto te podría gustar</h3>
              <div class="row g-4">
                <div class="col-6 col-md-4">
                  <div class="product-card">
                    <div class="product-image">
                      <img src="assets/img/product/product-11.webp" alt="Product" loading="lazy">
                    </div>
                    <h5>Wireless Earbuds</h5>
                    <div class="product-price">$59.99</div>
                    <a href="#" class="btn btn-add-cart">
                      <i class="bi bi-plus"></i>
                      Add to Cart
                    </a>
                  </div>
                </div>
                <div class="col-6 col-md-4">
                  <div class="product-card">
                    <div class="product-image">
                      <img src="assets/img/product/product-10.webp" alt="Product" loading="lazy">
                    </div>
                    <h5>Portable Phone Charger</h5>
                    <div class="product-price">$34.99</div>
                    <a href="#" class="btn btn-add-cart">
                      <i class="bi bi-plus"></i>
                      Add to Cart
                    </a>
                  </div>
                </div>
                <div class="col-6 col-md-4 d-none d-md-block">
                  <div class="product-card">
                    <div class="product-image">
                      <img src="assets/img/product/product-8.webp" alt="Product" loading="lazy">
                    </div>
                    <h5>Smart Watch</h5>
                    <div class="product-price">$149.99</div>
                    <a href="#" class="btn btn-add-cart">
                      <i class="bi bi-plus"></i>
                      Add to Cart
                    </a>
                  </div>
                </div>
              </div>
            </div>
          -->
        </div>
      </div>
    </div>

    </div>

  </section><!-- /Order Confirmation Section -->

</main>
{% endblock %}